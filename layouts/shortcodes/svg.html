{{ $img := .Page.Resources.GetMatch (printf "%s" (.Get "src" | safeURL )) }}
{{ $alt := .Get "alt" }}
{{ $caption := .Get "caption" }}
{{ $captionPosition := .Get "caption-position" }}

<figure>
  <div>
    {{ readFile $img.RelPermalink | replaceRE "<svg" "<svg style='margin: auto'" | safeHTML }}
  </div>

  {{ with $caption }}
    <figcaption>
      {{ . }}
    </figcaption>
  {{ end }}
</figure>